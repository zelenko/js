<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>JS reading from TXT file</title>
            <script>
                    function loadDoc(url, callback, method) {
                      var xhttp = new XMLHttpRequest();
                      xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                          callback(this.responseText);
                        }
                      };
                    
                      xhttp.open(method, url, true);
                      xhttp.send();
                    }
                    
                    
                    function clearing() {
                        document.getElementById("demo").innerHTML = "cleared";
                    }
                    
                    
                    function populate(text){
                        var lines = text.split( "\n" );
                        var output = "";
                    
                        for ( var n = 0; n < lines.length; ++n ){
                            // process each line
                            output = output + n + " ==> " + lines[n] + "</br>"
                        }
                    
                        document.getElementById("demo").innerHTML = output;
                    }
                    
                    function populate2(text){
                        var lines = text.split( "\n" );
                        var output = "";
                    
                        for ( var n = 0; n < lines.length; ++n ){
                            // process each line
                            output = output + n + ": " + lines[n] + "</br>"
                        }
                    
                        document.getElementById("demo").innerHTML = output;
                    }
                    
                    </script>

    </head>
<body>

    <button type="button" onclick="loadDoc('test.txt', populate, 'GET')">Change Content</button>
    <button type="button" onclick="loadDoc('/todos', populate2, 'GET')">Change Content 2</button>
    <button type="button" onclick="loadDoc('https://raw.githubusercontent.com/zelenko/zelenko.github.io/master/readjs/test.txt', populate2, 'GET')">Test File</button>
    <button type="button" onclick="clearing()">Clear Content</button>
<div id="demo">
<h1>JS reading from TXT file</h1>

</div>

    <form>
        <label for="tx">day of week</label>
        <input type="text" id="description" name="description">
        <label for="sub">subscribe</label>
        <input type="checkbox" id="complete" name="complete" value="true" class="i">
        <input type="button" value="Click me" onclick="submitForm()">
        <input type="button" value="button" id="btn2">
    </form>

    <script>
        var tx = document.querySelector('#tx');
        //var inputs = document.querySelectorAll('.i');
        var form = document.querySelector('form');
        var b = document.querySelector('#btn2');

        //console.log(tx);
        //console.log(inputs);
        //console.log(form);
        //console.log(b);

        /*for (i = 0; i < inputs.length; i++) {
            console.log(i);
            inputs[i].addEventListener('click', submitForm);
        } */

        //tx.addEventListener('input', submitForm);
        //form.addEventListener('submit', submitForm);
        b.addEventListener('click', submitForm);

        function submitForm(){
            var data = new FormData(form);
            var xhr = new XMLHttpRequest();
            //xhr.setRequestHeader("Content-type", "application/json");
            xhr.open('POST', '/test', true);
            xhr.send(data);
            clearing()
        }
    </script>


</body>
</html>